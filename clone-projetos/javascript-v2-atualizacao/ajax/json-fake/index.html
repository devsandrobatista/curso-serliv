<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON fake</title>
</head>

<body>

    <form action="#" method="POST" id="formCadastrar">

        <input type="text" name="title" id="title"><br>
        <textarea name="body" id="body"></textarea><br>

        <input type="submit" value="Cadastrar" id="btnCadastrar">

    </form>
    <script>

        document.querySelector("#formCadastrar").addEventListener("submit", function (evt) {
            evt.preventDefault()

            cadastrarPost(1)
        })

        async function buscaPostPorUsuario(id) {
            try {
                const resposta = await fetch(`https://jsonplaceholder.typicode.com/users/${id}/posts`)
                console.log(resposta)
                console.log(resposta.status)

                if (!resposta.ok) {
                    throw Error("Erro na requisição")
                }

                const dados = await resposta.json()
                mostrarDados(dados)

            } catch (e) {
                alert("Erro:" + e)
            }
        }

        buscaPostPorUsuario(1)

        function mostrarDados(dados) {
            console.log(dados)
        }


        async function cadastrarPost(userId) {
            try {
                const resposta = await fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    body: JSON.stringify({
                        title: document.getElementById("title").value,
                        body: document.getElementById("body").value,
                        userId
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8',
                    },
                })

                console.log(resposta)
                console.log(resposta.status)

                const dados = await resposta.json()
                mostrarDados(dados)
            } catch (e) {
                alert("Erro:" + e)
            }
        }

    </script>
</body>

</html>